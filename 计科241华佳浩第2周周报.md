# OpenCV图像处理学习报告


##  学习内容

### 3.1 图像读取与属性检查

通过`cv2.imread()`，我成功读取了不同格式的图像（例如JPG、PNG）。在学习中，我使用了以下两种常见的读取方式：

- **灰度图像**：通过`cv2.IMREAD_GRAYSCALE`标志读取图像为灰度图，这有助于简化图像处理。
- **彩色图像**：默认情况下，OpenCV读取图像时会将其作为彩色图像进行处理，这在很多计算机视觉应用中是常见的。

```python
# 读取灰度图像
cb_img = cv2.imread("test.png", 0)
```

通过`cb_img.shape`，我能够检查图像的尺寸（高、宽）以及颜色通道数量。使用`cb_img.dtype`来查看图像的数据类型，确认图像是以`uint8`格式存储的，这意味着每个像素的值范围在0到255之间。

### 3.2 矩阵表示与图像数据

在学习过程中，我理解了图像是如何在内存中表示为矩阵的。在OpenCV中，图像被表示为Numpy数组，每个像素点的值表示为一个数字。例如，灰度图像的每个像素值可以通过打印数组的方式查看。

```python
print(cb_img)
```

对于彩色图像，OpenCV使用BGR格式（蓝色、绿色、红色）来存储颜色通道，因此对图像进行显示时需要特别注意颜色的顺序。

### 3.3 图像显示与Matplotlib

我学会了如何使用Matplotlib的`imshow()`函数来显示图像。在默认情况下，Matplotlib使用的是RGB格式，而OpenCV存储图像使用的是BGR格式。因此，在显示图像时，我需要将颜色通道进行反转：

```python
coke_img_channels_reversed = coke_img[:, :, ::-1]
plt.imshow(coke_img_channels_reversed)
```

通过这种方法，我可以正确显示彩色图像，并且能够使用不同的颜色空间来处理图像。

### 3.4 颜色通道的拆分与合并

我还学习了如何分离和合并图像的颜色通道。OpenCV提供了`cv2.split()`函数将多通道图像分解成单通道的分量，`cv2.merge()`函数则可以将多个通道重新合并成一个多通道图像。

```python
b, g, r = cv2.split(img_NZ_bgr)
```

通过这种操作，我能够单独查看每个颜色通道，甚至修改其中的某一个通道，然后再将其与其他通道合并，得到一个新的图像。

### 3.5 颜色空间转换

颜色空间转换是图像处理中常见的操作，OpenCV通过`cv2.cvtColor()`函数来完成图像从一种颜色空间到另一种颜色空间的转换。例如，使用`cv2.COLOR_BGR2HSV`将BGR图像转换为HSV颜色空间，这在进行图像分割或颜色检测时非常有用。

```python
img_hsv = cv2.cvtColor(img_NZ_bgr, cv2.COLOR_BGR2HSV)
```

此外，我还学会了如何在HSV空间下修改图像的色调（H通道），并将修改后的图像重新转换为RGB格式。

### 3.6 图像保存

图像的保存通过`cv2.imwrite()`函数完成。通过指定文件路径和图像数据，我可以将处理后的图像保存为指定格式的文件。

```python
cv2.imwrite("New_Zealand_Lake_SAVED.png", img_NZ_bgr)
```

这使得图像处理的结果可以在后续的应用中使用，或用于进一步分析。

##  遇到的问题与解决方案

- **图像显示问题**：最初，当我尝试显示灰度图像时，图像的显示效果不如预期，原因是Matplotlib使用了默认的颜色映射。我通过手动指定`cmap="gray"`解决了这一问题。

- **颜色通道问题**：由于OpenCV和Matplotlib的颜色通道顺序不同，导致了图像显示时颜色不正确。解决方法是使用`[::-1]`反转颜色通道的顺序。
